{"version":3,"file":"preview-a62cc3b2.js","sources":["../../../node_modules/.pnpm/storybook-addon-pseudo-states@2.0.1_@storybook+components@7.0.9_@storybook+core-events@7.0.9__hkhiax7x2nglnuy5bejvb5fpjm/node_modules/storybook-addon-pseudo-states/dist/chunk-A7FPDXSC.mjs","../../../node_modules/.pnpm/storybook-addon-pseudo-states@2.0.1_@storybook+components@7.0.9_@storybook+core-events@7.0.9__hkhiax7x2nglnuy5bejvb5fpjm/node_modules/storybook-addon-pseudo-states/dist/preview.mjs"],"sourcesContent":["// src/constants.ts\nvar ADDON_ID = \"storybook/pseudo-states\";\nvar TOOL_ID = `${ADDON_ID}/tool`;\nvar EXCLUDED_PSEUDO_ELEMENTS = [\"::-webkit-scrollbar-thumb\"];\nvar PSEUDO_STATES = {\n  hover: \"hover\",\n  active: \"active\",\n  focusVisible: \"focus-visible\",\n  focusWithin: \"focus-within\",\n  focus: \"focus\",\n  visited: \"visited\",\n  link: \"link\",\n  target: \"target\"\n};\n\nexport {\n  ADDON_ID,\n  TOOL_ID,\n  EXCLUDED_PSEUDO_ELEMENTS,\n  PSEUDO_STATES\n};\n","import {\n  EXCLUDED_PSEUDO_ELEMENTS,\n  PSEUDO_STATES\n} from \"./chunk-A7FPDXSC.mjs\";\n\n// src/preview/withPseudoState.ts\nimport {\n  DOCS_RENDERED,\n  STORY_CHANGED,\n  STORY_RENDERED,\n  UPDATE_GLOBALS\n} from \"@storybook/core-events\";\nimport { addons, useEffect, useMemo } from \"@storybook/preview-api\";\n\n// src/preview/splitSelectors.ts\nvar isAtRule = (selector) => selector.indexOf(\"@\") === 0;\nvar splitSelectors = (selectors) => {\n  if (isAtRule(selectors))\n    return [selectors];\n  let result = [];\n  let parentheses = 0;\n  let brackets = 0;\n  let selector = \"\";\n  for (let i = 0, len = selectors.length; i < len; i++) {\n    const char = selectors[i];\n    if (char === \"(\") {\n      parentheses += 1;\n    } else if (char === \")\") {\n      parentheses -= 1;\n    } else if (char === \"[\") {\n      brackets += 1;\n    } else if (char === \"]\") {\n      brackets -= 1;\n    } else if (char === \",\") {\n      if (!parentheses && !brackets) {\n        result.push(selector.trim());\n        selector = \"\";\n        continue;\n      }\n    }\n    selector += char;\n  }\n  result.push(selector.trim());\n  return result;\n};\n\n// src/preview/rewriteStyleSheet.ts\nvar pseudoStates = Object.values(PSEUDO_STATES);\nvar matchOne = new RegExp(`:(${pseudoStates.join(\"|\")})`);\nvar matchAll = new RegExp(`:(${pseudoStates.join(\"|\")})`, \"g\");\nvar warnings = /* @__PURE__ */ new Set();\nvar warnOnce = (message) => {\n  if (warnings.has(message))\n    return;\n  console.warn(message);\n  warnings.add(message);\n};\nvar isExcludedPseudoElement = (selector, pseudoState) => EXCLUDED_PSEUDO_ELEMENTS.some((element) => selector.endsWith(`${element}:${pseudoState}`));\nvar rewriteRule = ({ cssText, selectorText }, shadowRoot) => {\n  return cssText.replace(\n    selectorText,\n    splitSelectors(selectorText).flatMap((selector) => {\n      if (selector.includes(\".pseudo-\")) {\n        return [];\n      }\n      if (!matchOne.test(selector)) {\n        return [selector];\n      }\n      const states = [];\n      const plainSelector = selector.replace(matchAll, (_, state) => {\n        states.push(state);\n        return \"\";\n      });\n      const classSelector = states.reduce((acc, state) => {\n        if (isExcludedPseudoElement(selector, state))\n          return \"\";\n        return acc.replace(new RegExp(`:${state}`, \"g\"), `.pseudo-${state}`);\n      }, selector);\n      if (selector.startsWith(\":host(\") || selector.startsWith(\"::slotted(\")) {\n        return [selector, classSelector].filter(Boolean);\n      }\n      const ancestorSelector = shadowRoot ? `:host(${states.map((s) => `.pseudo-${s}`).join(\"\")}) ${plainSelector}` : `${states.map((s) => `.pseudo-${s}`).join(\"\")} ${plainSelector}`;\n      return [selector, classSelector, ancestorSelector].filter(\n        (selector2) => selector2 && !selector2.includes(\":not()\")\n      );\n    }).join(\", \")\n  );\n};\nvar rewriteStyleSheet = (sheet, shadowRoot, shadowHosts2) => {\n  if (sheet.__pseudoStatesRewritten)\n    return;\n  sheet.__pseudoStatesRewritten = true;\n  try {\n    let index = -1;\n    for (const cssRule of sheet.cssRules) {\n      index++;\n      if (!(\"selectorText\" in cssRule))\n        continue;\n      const styleRule = cssRule;\n      if (matchOne.test(styleRule.selectorText)) {\n        const newRule = rewriteRule(styleRule, shadowRoot);\n        sheet.deleteRule(index);\n        sheet.insertRule(newRule, index);\n        if (shadowRoot && shadowHosts2)\n          shadowHosts2.add(shadowRoot.host);\n      }\n      if (index > 1e3) {\n        warnOnce(\"Reached maximum of 1000 pseudo selectors per sheet, skipping the rest.\");\n        break;\n      }\n    }\n  } catch (e) {\n    if (String(e).includes(\"cssRules\")) {\n      warnOnce(`Can't access cssRules, likely due to CORS restrictions: ${sheet.href}`);\n    } else {\n      console.error(e, sheet.href);\n    }\n  }\n};\n\n// src/preview/withPseudoState.ts\nvar channel = addons.getChannel();\nvar shadowHosts = /* @__PURE__ */ new Set();\nvar applyClasses = (element, classnames) => {\n  Object.values(PSEUDO_STATES).forEach((state) => element.classList.remove(`pseudo-${state}`));\n  classnames.forEach((classname) => element.classList.add(classname));\n};\nvar applyParameter = (rootElement, parameter) => {\n  const map = /* @__PURE__ */ new Map([[rootElement, /* @__PURE__ */ new Set()]]);\n  const add = (target, state) => map.set(target, /* @__PURE__ */ new Set([...map.get(target) || [], state]));\n  Object.entries(parameter || {}).forEach(([state, value]) => {\n    if (typeof value === \"boolean\") {\n      if (value)\n        add(rootElement, state);\n    } else if (typeof value === \"string\") {\n      rootElement.querySelectorAll(value).forEach((el) => add(el, state));\n    } else if (Array.isArray(value)) {\n      value.forEach((sel) => rootElement.querySelectorAll(sel).forEach((el) => add(el, state)));\n    }\n  });\n  map.forEach((states, target) => {\n    const classnames = /* @__PURE__ */ new Set();\n    states.forEach((key) => PSEUDO_STATES[key] && classnames.add(`pseudo-${PSEUDO_STATES[key]}`));\n    applyClasses(target, classnames);\n  });\n};\nvar updateShadowHost = (shadowHost) => {\n  const classnames = /* @__PURE__ */ new Set();\n  for (let element = shadowHost.parentElement; element; element = element.parentElement) {\n    if (!element.className)\n      continue;\n    element.className.split(\" \").filter((classname) => classname.indexOf(\"pseudo-\") === 0).forEach((classname) => classnames.add(classname));\n  }\n  applyClasses(shadowHost, classnames);\n};\nvar withPseudoState = (StoryFn, { viewMode, parameters, id, globals: globalsArgs }) => {\n  const { pseudo: parameter } = parameters;\n  const { pseudo: globals } = globalsArgs;\n  const canvasElement = useMemo(() => {\n    if (viewMode === \"docs\") {\n      return document.getElementById(`story--${id}`);\n    }\n    return document.getElementById(\"storybook-root\") || document.getElementById(\"root\");\n  }, [viewMode, id]);\n  useEffect(() => {\n    if (parameter !== globals && viewMode === \"story\") {\n      channel.emit(UPDATE_GLOBALS, {\n        globals: { pseudo: parameter }\n      });\n    }\n  }, [parameter, viewMode]);\n  useEffect(() => {\n    if (!canvasElement)\n      return;\n    const timeout = setTimeout(() => {\n      applyParameter(canvasElement, globals || parameter);\n      shadowHosts.forEach(updateShadowHost);\n    }, 0);\n    return () => clearTimeout(timeout);\n  }, [canvasElement, globals, parameter]);\n  return StoryFn();\n};\nvar rewriteStyleSheets = (shadowRoot) => {\n  let styleSheets = Array.from(shadowRoot ? shadowRoot.styleSheets : document.styleSheets);\n  if (shadowRoot?.adoptedStyleSheets?.length)\n    styleSheets = shadowRoot.adoptedStyleSheets;\n  styleSheets.forEach((sheet) => rewriteStyleSheet(sheet, shadowRoot, shadowHosts));\n};\nchannel.on(STORY_CHANGED, () => shadowHosts.clear());\nchannel.on(STORY_RENDERED, () => rewriteStyleSheets());\nchannel.on(DOCS_RENDERED, () => rewriteStyleSheets());\nif (Element.prototype.attachShadow) {\n  Element.prototype._attachShadow = Element.prototype.attachShadow;\n  Element.prototype.attachShadow = function attachShadow(init) {\n    const shadowRoot = this._attachShadow({ ...init, mode: \"open\" });\n    requestAnimationFrame(() => {\n      rewriteStyleSheets(shadowRoot);\n      updateShadowHost(shadowRoot.host);\n    });\n    return shadowRoot;\n  };\n}\n\n// src/preview.ts\nvar decorators = [withPseudoState];\nexport {\n  decorators\n};\n"],"names":["EXCLUDED_PSEUDO_ELEMENTS","PSEUDO_STATES","addons","useEffect","useMemo","isAtRule","selector","splitSelectors","selectors","result","parentheses","brackets","i","len","char","pseudoStates","matchOne","matchAll","warnings","warnOnce","message","isExcludedPseudoElement","pseudoState","element","rewriteRule","cssText","selectorText","shadowRoot","states","plainSelector","_","state","classSelector","acc","ancestorSelector","s","selector2","rewriteStyleSheet","sheet","shadowHosts2","index","cssRule","styleRule","newRule","e","channel","shadowHosts","applyClasses","classnames","classname","applyParameter","rootElement","parameter","map","add","target","value","el","sel","key","updateShadowHost","shadowHost","withPseudoState","StoryFn","viewMode","parameters","id","globalsArgs","globals","canvasElement","UPDATE_GLOBALS","timeout","rewriteStyleSheets","_a","styleSheets","STORY_CHANGED","STORY_RENDERED","DOCS_RENDERED","init","decorators"],"mappings":"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","x_google_ignoreList":[0,1]}