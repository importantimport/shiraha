var R="pseudo",b=["::-webkit-scrollbar-thumb"],f={hover:"hover",active:"active",focusVisible:"focus-visible",focusWithin:"focus-within",focus:"focus",visited:"visited",link:"link",target:"target"};const{DOCS_RENDERED:w,STORY_CHANGED:A,STORY_RENDERED:D,UPDATE_GLOBALS:T}=__STORYBOOK_MODULE_CORE_EVENTS__,{addons:j,useEffect:h,useMemo:x}=__STORYBOOK_MODULE_PREVIEW_API__;var C=e=>e.indexOf("@")===0,k=e=>{if(C(e))return[e];let n=[],t=0,r=0,a="";for(let s=0,l=e.length;s<l;s++){const o=e[s];if(o==="(")t+=1;else if(o===")")t-=1;else if(o==="[")r+=1;else if(o==="]")r-=1;else if(o===","&&!t&&!r){n.push(a.trim()),a="";continue}a+=o}return n.push(a.trim()),n},g=Object.values(f),v=new RegExp(`:(${g.join("|")})`),L=new RegExp(`:(${g.join("|")})`,"g"),E=new Set,m=e=>{E.has(e)||(console.warn(e),E.add(e))},y=(e,n)=>b.some(t=>e.endsWith(`${t}:${n}`)),N=({cssText:e,selectorText:n},t)=>e.replace(n,k(n).flatMap(r=>{if(r.includes(".pseudo-"))return[];if(!v.test(r))return[r];const a=[],s=r.replace(L,(i,c)=>(a.push(c),"")),l=a.reduce((i,c)=>y(r,c)?"":i.replace(new RegExp(`:${c}`,"g"),`.pseudo-${c}`),r),o=a.reduce((i,c)=>y(r,c)?"":i.replace(new RegExp(`:${c}`,"g"),`.pseudo-${c}-all`),r);if(r.startsWith(":host(")||r.startsWith("::slotted("))return[r,l,o].filter(Boolean);const u=t?`:host(${a.map(i=>`.pseudo-${i}-all`).join("")}) ${s}`:`${a.map(i=>`.pseudo-${i}-all`).join("")} ${s}`;return[r,l,u].filter(i=>i&&!i.includes(":not()"))}).join(", ")),P=(e,n,t)=>{if(!e.__pseudoStatesRewritten){e.__pseudoStatesRewritten=!0;try{let r=-1;for(const a of e.cssRules){if(r++,!("selectorText"in a))continue;const s=a;if(v.test(s.selectorText)){const l=N(s,n);e.deleteRule(r),e.insertRule(l,r),n&&t&&t.add(n.host)}if(r>1e3){m("Reached maximum of 1000 pseudo selectors per sheet, skipping the rest.");break}}}catch(r){String(r).includes("cssRules")?m(`Can't access cssRules, likely due to CORS restrictions: ${e.href}`):console.error(r,e.href)}}},p=j.getChannel(),d=new Set,O=(e,n)=>{Object.values(f).forEach(t=>{e.classList.remove(`pseudo-${t}`),e.classList.remove(`pseudo-${t}-all`)}),n.forEach(t=>e.classList.add(t))},B=(e,n={})=>{const t=new Map([[e,new Set]]),r=(a,s)=>t.set(a,new Set([...t.get(a)||[],s]));Object.entries(n||{}).forEach(([a,s])=>{typeof s=="boolean"?s&&r(e,`${a}-all`):typeof s=="string"?e.querySelectorAll(s).forEach(l=>r(l,a)):Array.isArray(s)&&s.forEach(l=>e.querySelectorAll(l).forEach(o=>r(o,a)))}),t.forEach((a,s)=>{const l=new Set;a.forEach(o=>{const u=o.replace("-all","");f[o]?l.add(`pseudo-${f[o]}`):f[u]&&l.add(`pseudo-${f[u]}-all`)}),O(s,l)})},$=e=>{const n=new Set;for(let t=e.parentElement;t;t=t.parentElement)t.className&&t.className.split(" ").filter(r=>r.indexOf("pseudo-")===0).forEach(r=>n.add(r));O(e,n)},_=e=>{const{rootSelector:n,...t}=e||{};return t},U=(e={},n={})=>e!==null&&n!==null&&Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every(t=>JSON.stringify(e[t])===JSON.stringify(n[t])),W=(e,{viewMode:n,parameters:t,id:r,globals:a})=>{const{pseudo:s}=t,{pseudo:l}=a,{rootSelector:o}=s||{},u=x(()=>o?document.querySelector(o):n==="docs"?document.getElementById(`story--${r}`):document.getElementById("storybook-root")||document.getElementById("root"),[o,n,r]);return h(()=>{const i=_(s);n==="story"&&!U(i,l)&&p.emit(T,{globals:{pseudo:i}})},[s,n]),h(()=>{if(!u)return;const i=setTimeout(()=>{B(u,l||_(s)),d.forEach($)},0);return()=>clearTimeout(i)},[u,l,s]),e()},S=e=>{var t;let n=Array.from(e?e.styleSheets:document.styleSheets);(t=e==null?void 0:e.adoptedStyleSheets)!=null&&t.length&&(n=e.adoptedStyleSheets),n.forEach(r=>P(r,e,d))};p.on(A,()=>d.clear());p.on(D,()=>S());p.on(w,()=>S());Element.prototype.attachShadow&&(Element.prototype._attachShadow=Element.prototype.attachShadow,Element.prototype.attachShadow=function(n){const t=this._attachShadow({...n,mode:"open"});return requestAnimationFrame(()=>{S(t),$(t.host)}),t});var q=[W],I={[R]:!1};export{q as decorators,I as globals};
//# sourceMappingURL=preview-6d4619ec.js.map
